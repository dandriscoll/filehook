version: 1

watch:
  paths:
    - ./input
  ignore:
    - "*.tmp"
    - "*.partial"
    - ".git"
  debounce_ms: 200

inputs:
  patterns:
    # Named patterns can be targeted with --pattern / -p flag
    - name: text
      pattern: "*.txt"
    - name: markdown
      pattern: "*.md"
    # Unnamed patterns still work (matched when no filter is active)
    # - "*.log"

outputs:
  root: ./output

# Command to run for each input file
# Available variables: {{input}}, {{output}}, {{outputs}}, {{outputs_json}}, {{output_dir}}
command: ["sh", "-c", "cat {{input}} | tr 'a-z' 'A-Z' > {{output}}"]

plugins:
  # Naming plugin returns JSON: {"outputs": ["out.txt"], "ready": true}
  # - outputs: generated output filenames
  # - ready: if false, file is skipped (defaults to true)
  naming:
    path: ./plugins/naming.sh
    args: []
  # Optional: custom should_process logic (for modification policy, NOT readiness)
  # should_process:
  #   path: ./plugins/should_process.sh
  #   args: []

concurrency:
  mode: parallel    # parallel | sequential_switch
  max_workers: 2

# Policy when input files are modified after initial processing
# Options: ignore, reprocess, if-newer, versioned
on_modified: if-newer

# Where to store queue database and job logs
state_dir: .filehook

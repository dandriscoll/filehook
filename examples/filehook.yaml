version: 1

watch:
  paths:
    - ./input
  ignore:
    - "*.tmp"
    - "*.partial"
    - ".git"
  debounce_ms: 200

inputs:
  patterns:
    # Named patterns can be targeted with --pattern / -p flag
    - name: text
      pattern: "*.txt"
      target_type: upper  # target type for naming plugin (ft propose)
    - name: markdown
      pattern: "*.md"
      target_type: upper
    # Unnamed patterns still work (matched when no filter is active)
    # - "*.log"

outputs:
  root: ./output

# Command to run for each input file
# Available variables: {{input}}, {{output}}, {{outputs}}, {{outputs_json}}, {{output_dir}}
command: ["sh", "-c", "cat {{input}} | tr 'a-z' 'A-Z' > {{output}}"]

plugins:
  # Naming plugin follows the ft tool contract:
  # - "ready <path>" returns "true" or "false" (plain text)
  # - "propose <path> <type>" returns the proposed output filename (plain text)
  # The target type comes from the pattern's target_type field.
  naming:
    path: ./plugins/naming.sh
    args: []
  # Optional: custom should_process logic (for modification policy, NOT readiness)
  # should_process:
  #   path: ./plugins/should_process.sh
  #   args: []

concurrency:
  mode: parallel    # parallel | sequential_switch
  max_workers: 2

# Policy when input files are modified after initial processing
# Options: ignore, reprocess, if-newer, versioned
on_modified: if-newer

# Where to store queue database and job logs
state_dir: .filehook
